<div class="modal-body">
  <form>
    <div class="mb-3">
      <label for="titulo" class="form-label fw-semibold">Título</label>
      <input
        type="text"
        class="form-control"
        id="titulo"
        [(ngModel)]="tarefa.titulo"
        name="titulo"
        required
      />
    </div>

    <div class="mb-3">
      <label for="descricao" class="form-label fw-semibold">Descrição</label>
      <textarea
        class="form-control"
        id="descricao"
        rows="3"
        [(ngModel)]="tarefa.descricao"
        name="descricao"
      ></textarea>
    </div>

    <div class="mb-3">
      <label for="status" class="form-label fw-semibold">Status</label>
      <select
        class="form-select"
        id="status"
        [(ngModel)]="tarefa.status"
        name="status"
      >
        <option value="pendente">Pendente</option>
        <option value="em_andamento">Em andamento</option>
        <option value="concluida">Concluída</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="responsavel" class="form-label fw-semibold">Responsável</label>
      <input
        type="text"
        class="form-control"
        id="responsavel"
        [(ngModel)]="tarefa.responsavel"
        name="responsavel"
      />
    </div>

    <div class="mb-3">
      <label for="prioridade" class="form-label fw-semibold">Prioridade</label>
      <select
        class="form-select"
        id="prioridade"
        [(ngModel)]="tarefa.prioridade"
        name="prioridade"
        (change)="atualizarPrioridade()"
      >
        <option value="alta">Alta</option>
        <option value="atencao">Atenção</option>
        <option value="normal">Normal</option>
        <option value="concluido">Concluído</option>
      </select>
    </div>

    <div *ngIf="tarefa.checklist.length === 0" class="mb-3 text-end">
      <button
        type="button"
        class="btn btn-outline-primary btn-sm"
        (click)="adicionarItemChecklist()"
      >
        + Adicionar subtarefa
      </button>
    </div>

    <div class="mb-3" *ngIf="tarefa.checklist.length > 0">
      <label class="form-label fw-semibold">Subtarefa</label>

      <div
        *ngFor="let item of tarefa.checklist; let i = index"
        class="d-flex align-items-center mb-2"
      >
        <input
          type="text"
          class="form-control me-2"
          [(ngModel)]="item.nome"
          name="nome-{{ i }}"
          placeholder="Descrição do item"
        />
        <button
          type="button"
          class="btn btn-outline-danger btn-sm"
          (click)="removerItemChecklist(i)"
        >
          ✕
        </button>
      </div>

      <button
        type="button"
        class="btn btn-outline-primary btn-sm mt-2"
        (click)="adicionarItemChecklist()"
      >
        + Adicionar subtarefa
      </button>
    </div>
  </form>
</div>


<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="activeModal.dismiss()">
    Cancelar
  </button>
  <button type="button" class="btn btn-primary" (click)="salvar()">
    Salvar
  </button>
</div>
